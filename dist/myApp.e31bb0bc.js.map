{"version":3,"sources":["redditApi.js","index.js"],"names":["search","searchTerm","sortBy","searchLimit","fetch","then","res","json","data","children","map","catch","err","console","log","module","exports","require","searchForm","document","getElementById","searchInput","addEventListener","e","value","querySelector","showMessage","results","output","forEach","result","image","preview","images","source","url","title","truncateText","selftext","subreddit","score","innerHTML","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","searchElement","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substring"],"mappings":"ACAA,ADAA,ICAMA,MAAM,GAAGiB,OAAO,CAAC,aAAD,CAAtB;ADCAjB,MAAM,GAAG,gBAACC,UAAD,EAAaC,MAAb,EAAqBC,WAArB,EAAqC;ACC9C,ADAE,ICAIe,KDCFd,KCDY,ADCP,GCDUe,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB,ODE8CnB,UADrC,mBACwDC,MADxD,oBACwEC,WADxE,EAAL,CAGGE,IAHH,CAGQ,UAAAC,GAAG;ACHf,ADGe,ICHTe,ODGaf,GAAG,CCHL,ADGMC,GCHHY,CDGD,EAAJ,KCHa,CAACC,cAAT,CAAwB,cAAxB,CAApB;AAEAF,ADCe,GAHX,EAIE,KCFI,CAACI,gBAAX,CAA4B,QAA5B,EAAsC,UAAAC,CAAC,EAAI;AACzC,ADHE,GAKGlB,IALH,CAKQ,UAAAG,IAAI;ACAd,ADAc,MCARP,KDAYO,IAAI,CCAN,ADAOA,GCAJa,CDAD,CAAUZ,QAAV,CCAY,ADAOC,CCANc,EDAb,CAAuB,ECAzC,CAHyC,CAIzC,MDDyChB,IAAI;AAAA,aAAIA,IAAI,CAACA,IAAT;ACE7C,ADF6C,KAA3B,CCEZN,ADFQ,MCEF,GAAGiB,QAAQ,CAACM,aAAT,CAAuB,6BAAvB,EAAsDD,KAArE,CALyC,CAMzC;ADHc,GALZ,EAMGb,KANH,CAMS,UAAAC,GAAG;ACGd,ADHc,MCGRT,KDHYU,MCGD,CDHQ,CAACC,CCGNK,EDHF,CAAYP,GAAZ,CAAJ,CCGc,CAACQ,cAAT,CAAwB,OAAxB,EAAiCI,KAArD,CAPyC,CASzC;ADLc,GANZ,CADF;ACaA,ADJD,CAVD,KCcMvB,UAAU,IAAI,EAAlB,EAAsB;AACpByB,IAAAA,WAAW,CAAC,2BAAD,EAA8B,cAA9B,CAAX;AACD,ADJHX,GCR2C,CAczC,EDNI,CAACC,OAAP,GAAiBhB,MAAjB;;;ACOEqB,EAAAA,WAAW,CAACG,KAAZ,GAAoB,EAApB,CAfyC,CAiBzC;;AACAxB,EAAAA,MAAM,CAACC,UAAD,EAAaC,MAAb,EAAqBC,WAArB,CAAN,CAAwCE,IAAxC,CAA6C,UAAAsB,OAAO,EAAI;AACtD,QAAIC,MAAM,GAAG,4BAAb;AACAD,IAAAA,OAAO,CAACE,OAAR,CAAgB,UAAAC,MAAM,EAAI;AACxB;AACA;AACA,UAAMC,KAAK,GAAGD,MAAM,CAACE,OAAP,GACVF,MAAM,CAACE,OAAP,CAAeC,MAAf,CAAsB,CAAtB,EAAyBC,MAAzB,CAAgCC,GADtB,GAEV,qEAFJ;AAGAP,MAAAA,MAAM,qEAEUG,KAFV,+HAIyBD,MAAM,CAACM,KAJhC,uDAKuBC,YAAY,CAACP,MAAM,CAACQ,QAAR,EAAkB,GAAlB,CALnC,yCAOER,MAAM,CAACK,GAPT,6JAUiDL,MAAM,CAACS,SAVxD,wFAYwCT,MAAM,CAACU,KAZ/C,8DAAN;AAiBD,KAvBD;AAyBAZ,IAAAA,MAAM,IAAI,QAAV;AACAT,IAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCqB,SAAnC,GAA+Cb,MAA/C;AACD,GA7BD;AA+BAL,EAAAA,CAAC,CAACmB,cAAF;AACD,CAlDD,GAoDA;;AACA,SAAShB,WAAT,CAAqBiB,OAArB,EAA8BC,SAA9B,EAAyC;AACvC;AACA,MAAMC,GAAG,GAAG1B,QAAQ,CAAC2B,aAAT,CAAuB,KAAvB,CAAZ;AACAD,EAAAA,GAAG,CAACD,SAAJ,mBAAyBA,SAAzB,EAHuC,CAIvC;;AACAC,EAAAA,GAAG,CAACE,WAAJ,CAAgB5B,QAAQ,CAAC6B,cAAT,CAAwBL,OAAxB,CAAhB,EALuC,CAMvC;;AACA,MAAMM,eAAe,GAAG9B,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,CAAxB,CAPuC,CAQvC;;AACA,MAAM8B,aAAa,GAAG/B,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAtB,CATuC,CAUvC;;AACA6B,EAAAA,eAAe,CAACE,YAAhB,CAA6BN,GAA7B,EAAkCK,aAAlC,EAXuC,CAavC;;AACAE,EAAAA,UAAU,CAAC,YAAM;AACfjC,IAAAA,QAAQ,CAACM,aAAT,CAAuB,QAAvB,EAAiC4B,MAAjC;AACD,GAFS,EAEP,IAFO,CAAV;AAGD,EAED;;;AACA,SAAShB,YAAT,CAAsBiB,IAAtB,EAA4BC,KAA5B,EAAmC;AACjC,MAAMC,SAAS,GAAGF,IAAI,CAACG,OAAL,CAAa,GAAb,EAAkBF,KAAlB,CAAlB;AACA,MAAIC,SAAS,IAAI,CAAC,CAAlB,EAAqB,OAAOF,IAAP;AACrB,SAAOA,IAAI,CAACI,SAAL,CAAe,CAAf,EAAkBF,SAAlB,CAAP;AACD","file":"myApp.e31bb0bc.js","sourceRoot":"..","sourcesContent":["//this is like a service file in angular\r\nsearch = (searchTerm, sortBy, searchLimit) => {\r\n  return (\r\n    fetch(\r\n      `https://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}$limit=${searchLimit}`\r\n    )\r\n      .then(res => res.json())\r\n      //since what we want is the data object, we can map thru it\r\n      .then(data => data.data.children.map(data => data.data))\r\n      .catch(err => console.log(err))\r\n  );\r\n};\r\n\r\nmodule.exports = search;\r\n","const search = require(\"./redditApi\");\r\n\r\nconst searchForm = document.getElementById(\"search-form\");\r\nconst searchInput = document.getElementById(\"search-input\");\r\n\r\nsearchForm.addEventListener(\"submit\", e => {\r\n  //get searchTerm\r\n\r\n  const searchTerm = searchInput.value;\r\n  //get sortBy\r\n  const sortBy = document.querySelector('input[type=\"radio\"]:checked').value;\r\n  //get searchLimit\r\n  const searchLimit = document.getElementById(\"limit\").value;\r\n\r\n  //add validation\r\n  if (searchTerm == \"\") {\r\n    showMessage(\"please add a search term \", \"alert-danger\");\r\n  }\r\n\r\n  //clear the input after submit\r\n  searchInput.value = \"\";\r\n\r\n  //search reddit\r\n  search(searchTerm, sortBy, searchLimit).then(results => {\r\n    let output = '<div class=\"card-columns\">';\r\n    results.forEach(result => {\r\n      //check for image\r\n      //if there is a result. preview then image will be result.preview.image[0].source.url;\r\n      const image = result.preview\r\n        ? result.preview.images[0].source.url\r\n        : \"https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg\";\r\n      output += `\r\n          <div class=\"card\">\r\n          <img src=\"${image}\" class=\"card-img-top\" alt=\"...\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">${result.title}</h5>\r\n            <p class=\"card-text\">${truncateText(result.selftext, 100)}</p>\r\n            <a href=\"${\r\n              result.url\r\n            }\" target=\"_blank\" class=\"btn btn-primary\"> Read More </a>\r\n            <hr/>\r\n            <span class=\"badge badge-secondary\">Subreddit: ${result.subreddit}\r\n            </span>\r\n            <span class=\"badge badge-dark\">Score: ${result.score}</span>\r\n          </div>\r\n        </div>\r\n\r\n            `;\r\n    });\r\n\r\n    output += \"</div>\";\r\n    document.getElementById(\"results\").innerHTML = output;\r\n  });\r\n\r\n  e.preventDefault();\r\n});\r\n\r\n//validation Function\r\nfunction showMessage(message, className) {\r\n  //create the div\r\n  const div = document.createElement(\"div\");\r\n  div.className = `alert ${className}`;\r\n  //add the text\r\n  div.appendChild(document.createTextNode(message));\r\n  //get the parent container\r\n  const searchContainer = document.getElementById(\"search-container\");\r\n  //get the div to insert it before\r\n  const searchElement = document.getElementById(\"search\");\r\n  //insert the message\r\n  searchContainer.insertBefore(div, searchElement);\r\n\r\n  //setTimeout fot the function\r\n  setTimeout(() => {\r\n    document.querySelector(\".alert\").remove();\r\n  }, 3000);\r\n}\r\n\r\n//Truncate Text\r\nfunction truncateText(text, limit) {\r\n  const shortened = text.indexOf(\" \", limit);\r\n  if (shortened == -1) return text;\r\n  return text.substring(0, shortened);\r\n}\r\n"]}